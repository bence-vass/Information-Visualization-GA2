<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon"
        href="https://raw.githubusercontent.com/bence-vass/Information-Visualization-A3/refs/heads/main/favicon.ico"
        type="image/x-icon">
    <title>InfVis - A3</title>

    <link rel="stylesheet" href="style.css">

    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Elements -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script>

    <!-- D3.js -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

    <!-- d3-cloud for word cloud -->
    <script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3.layout.cloud.js"></script>

    <!-- TopoJSON -->
    <script src="https://unpkg.com/topojson-client@3"></script>

</head>

<body class="bg-gray-900 text-white p-6" style="margin-bottom: 5rem; overflow: hidden;">

    <header>
        <div class="lg:flex lg:items-center lg:justify-between bg-gray-800 p-6 rounded-lg shadow-lg">
            <div class="flex-1 min-w-0">
                <h2 class="text-2xl sm:text-3xl font-bold">TU Wien Information Visualization - Assignment 3</h2>
                <div class="mt-2 flex flex-wrap sm:flex-row sm:space-x-6 text-gray-400 text-sm">
                    <div class="flex items-center mt-2">
                        Data Source:
                        <a href="https://github.com/metmuseum/openaccess" class="text-indigo-400 hover:underline ml-1">
                            The Metropolitan Museum of Art Open Access CSV
                        </a>
                    </div>
                </div>
            </div>

            <div class="mt-5 flex lg:mt-0 lg:ml-4 space-x-3">
                <a href="https://github.com/bence-vass/Information-Visualization-A3">
                    <button class="bg-indigo-500 hover:bg-indigo-400 px-3 py-2 rounded-md text-sm font-semibold">
                        View GitHub
                    </button>
                </a>
            </div>
        </div>

    </header>

    <!-- Grid -->
    <div id="charts" class="grid grid-cols-3 gap-4">

        <!-- Row 1 -->
        <!-- Row 1 - Cell 1 -->
        <!-- <div class="col-span-2">
            <div id="pieChartContainer" class="mx-auto ">

                <div style="display: flex;">
                    <input id="pieChartTopInput" type="number" min="3" max="25" value="12"
                        class="mx-4 w-20 text-center px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 dark:bg-gray-900" />
                    <button id="refreshPieChartBtn" style="border: #fff solid 2px"
                        class="flex items-center justify-center p-2 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-transform duration-200">
                        <span class="mr-4 ml-2">Refresh</span>
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#fff"
                            version="1.1" id="Capa_1" width="24px" height="24px" viewBox="0 0 547.842 547.842"
                            xml:space="preserve">
                            <g>
                                <path
                                    d="M506.367,293.097h-43.836c-11.092,0-20.043,8.874-20.426,19.813c-9.104,84.609-80.707,150.476-167.84,150.476   c-93.253,0-168.759-75.429-168.759-168.529c0-92.258,76.041-167.229,168.071-168.529v27.387c0,12.47,8.874,18.054,19.737,12.47   l140.684-71.986c10.863-5.585,10.863-14.612,0-20.196L293.314,2.168c-10.863-5.584-19.737,0-19.737,12.393v27.616   C134.882,43.478,21.127,156.239,21.127,295.01c0,139.612,113.296,252.832,253.139,252.832   c133.723,0,243.27-103.504,252.449-234.778C526.791,302.048,517.535,293.097,506.367,293.097z" />
                            </g>
                        </svg>
                    </button>
                </div>
                <div id="pieChart"></div>
            </div>
        </div> -->
        <!-- Row 1 - Cell 2 -->

        <!-- <div class="col-span-1 p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold mb-4 text-white">Discover Our Collection</h2>
            <p class="text-white leading-relaxed">
                Explore the fascinating range of artifacts and objects our museum has acquired over the selected time
                period.
                The accompanying pie chart illustrates the proportion of items obtained, offering a clear visual
                overview of
                our growing collection. Each segment represents a different category or type of artifact, giving
                visitors insight
                into the diversity and focus of our acquisitions.
            </p>
            <p class="mt-4 text-white leading-relaxed">
                Whether you are curious about historical relics, artistic masterpieces, or cultural treasures, this
                chart
                provides a snapshot of the richness of our collection and highlights the museum’s dedication to
                preserving
                history and culture.
            </p>
        </div> -->
        <!-- Row 1 END-->


        <!-- Row 1: Department Pie Chart -->
        <!-- Row 1 - Cell 1 (Description) -->
        <div class="col-span-1 p-6 rounded-lg">
            <div class="bg-gray-900 mb-8">
                <p class="text-gray-400 mb-2">
                    Use the brush below to explore acquisitions by year.<br>
                    Click on a department slice to filter other visualizations.
                </p>
                <p class="text-gray-100 font-medium">
                    Selected Time Period: <span id="timePeriod" class="text-blue-400"></span>
                </p>
                <p class="text-gray-100 font-medium">
                    Selected Department: <span id="departmentFilterName" class="text-blue-400">None</span>
                    <button id="clearDepartmentFilter"
                        class="ml-2 text-xs bg-red-500 hover:bg-red-600 px-2 py-1 rounded">Clear</button>
                </p>
                <p class="mt-4 text-sm text-gray-400">
                    The chart dynamically updates based on the selected time period from the brush below.
                </p>
            </div>

            <h2 class="text-2xl font-bold mb-4 text-white">Museum Department Distribution</h2>
            <p class="text-white leading-relaxed">
                The pie chart shows the distribution of museum objects across different departments. Each slice
                represents a department and its relative size indicates the proportion of the collection it holds.
            </p>
            <p class="mt-4 text-white leading-relaxed">
                Hover over any department to see detailed statistics. Click on a department to filter all other
                visualizations and explore that department's acquisitions over time.
            </p>
        </div>
        <!-- Row 1 - Cell 2 (Pie Chart) -->
        <div class="col-span-2 pt-6">
            <div id="pieChartDepartmentContainer">
                <div class="mb-4 flex items-center" style="position: absolute;">
                    <span class="content-center mr-2 font-medium text-white">Label threshold: ></span>
                    <input id="pieChartPercentInput" type="number" min="0" max="20" step="1" value="5"
                        class="mx-2 w-16 text-center px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 dark:bg-gray-900 text-white" />
                    <span class="content-center mr-4 font-medium text-white">% or top</span>
                    <input id="pieChartTopInput" type="number" min="3" max="15" value="7"
                        class="mx-2 w-16 text-center px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 dark:bg-gray-900 text-white" />
                    <span class="content-center font-medium text-white">departments</span>
                </div>
                <div id="pieChartDepartment"></div>
            </div>
        </div>
        <!-- Row 1: Department Pie Chart END-->


        <!-- Row 2: Bar Chart -->
        <!-- Row 2 - Cell 1 -->
        <div class="col-span-2">
            <div id="barChartContainer" class="mx-auto ">

                <div class="mb-4 flex">
                    <span class="content-center mr-2 font-medium">Bins:</span>
                    <input id="barChartTopInput" type="number" min="3" max="25" value="12"
                        class="mx-4 w-20 text-center px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 dark:bg-gray-900" />
                    <button id="refreshBarChartBtn" style="border: #fff solid 2px"
                        class="flex items-center justify-center p-2 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-transform duration-200">
                        <span class="mr-4 ml-2">Refresh</span>
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#fff"
                            version="1.1" id="Capa_1" width="24px" height="24px" viewBox="0 0 547.842 547.842"
                            xml:space="preserve">
                            <g>
                                <path
                                    d="M506.367,293.097h-43.836c-11.092,0-20.043,8.874-20.426,19.813c-9.104,84.609-80.707,150.476-167.84,150.476   c-93.253,0-168.759-75.429-168.759-168.529c0-92.258,76.041-167.229,168.071-168.529v27.387c0,12.47,8.874,18.054,19.737,12.47   l140.684-71.986c10.863-5.585,10.863-14.612,0-20.196L293.314,2.168c-10.863-5.584-19.737,0-19.737,12.393v27.616   C134.882,43.478,21.127,156.239,21.127,295.01c0,139.612,113.296,252.832,253.139,252.832   c133.723,0,243.27-103.504,252.449-234.778C526.791,302.048,517.535,293.097,506.367,293.097z" />
                            </g>
                        </svg>
                    </button>
                </div>
                <div id="barChart"></div>
            </div>
        </div>
        <!-- Row 1 - Cell 2 -->

        <div class="col-span-1 p-6 rounded-lg">
            <h2 class="text-2xl font-bold mb-4 text-white">Discover Our Collection</h2>
            <p class="text-white leading-relaxed">
                Explore the fascinating range of artifacts and objects our museum has acquired over the selected time
                period. The accompanying bar chart illustrates the number of items obtained in each category, providing
                a clear visual overview of our growing collection.
            </p>
            <p class="mt-4 text-white leading-relaxed">
                Each bar represents a different type of artifact, giving visitors insight into the diversity and focus
                of
                our acquisitions. Whether you are curious about historical relics, artistic masterpieces, or cultural
                treasures, this chart provides a snapshot of the richness of our collection and highlights the museum’s
                dedication to preserving history and culture.
            </p>
        </div>

        <!-- Row 1 END-->

        <!-- Row 2 -->
        <!-- Row 2 - Cell 1 -->
        <div class="col-span-1 p-6 rounded-lg">
            <h2 class="text-2xl font-bold mb-4 text-white">Track Our Growth Over Time</h2>
            <p class="text-white leading-relaxed">
                The line chart shows the number of new acquisitions in each category for every year, allowing you to see
                how our museum has developed over time. It highlights trends in our collection and the increasing
                diversity of artifacts we acquire.
            </p>
            <p class="mt-4 text-white leading-relaxed">
                Additionally, the chart reflects the number of new and interesting items put on display each year,
                giving visitors a sense of how our exhibitions evolve and what fresh treasures they can explore during
                each visit.
            </p>
        </div>
        <!-- Row 2 - Cell 1 END -->

        <!-- Row 2 - Cell 2 -->
        <div class="col-span-2">
            <div class="mb-4 flex">
                <span class="content-center mr-2 font-medium">From the</span>
                <input id="lineChartShiftInput" type="number" min="0" max="20" value="7"
                    class="mx-4 w-20 text-center px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 dark:bg-gray-900" />
                <span class="content-center mr-2 font-medium">th largest growing the Top: </span>
                <input id="lineChartTopInput" type="number" min="3" max="20" value="7"
                    class="mx-4 w-20 text-center px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 dark:bg-gray-900" />
                <span class="content-center mr-2 font-medium">categories</span>

                <button id="refreshLineChartBtn" style="border: #fff solid 2px"
                    class="flex items-center justify-center p-2 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-transform duration-200">
                    <span class="mr-4 ml-2">Refresh</span>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#fff"
                        version="1.1" id="Capa_1" width="24px" height="24px" viewBox="0 0 547.842 547.842"
                        xml:space="preserve">
                        <g>
                            <path
                                d="M506.367,293.097h-43.836c-11.092,0-20.043,8.874-20.426,19.813c-9.104,84.609-80.707,150.476-167.84,150.476   c-93.253,0-168.759-75.429-168.759-168.529c0-92.258,76.041-167.229,168.071-168.529v27.387c0,12.47,8.874,18.054,19.737,12.47   l140.684-71.986c10.863-5.585,10.863-14.612,0-20.196L293.314,2.168c-10.863-5.584-19.737,0-19.737,12.393v27.616   C134.882,43.478,21.127,156.239,21.127,295.01c0,139.612,113.296,252.832,253.139,252.832   c133.723,0,243.27-103.504,252.449-234.778C526.791,302.048,517.535,293.097,506.367,293.097z" />
                        </g>
                    </svg>
                </button>
            </div>
            <div id="tooltipLineChart"></div>
            <div id="lineChart" class="mx-auto col-span-2"></div>

        </div>
        <!-- Row 2 - Cell 2 END -->
        <!-- Row 2 END-->

        <!-- Row 3 -->
        <div class="col-span-3">
            <h2 class="text-2xl sm:text-3xl font-bold my-8">
                Highlights of the selected period:
            </h2>
            <div id="wordCloud" class="w-full overflow-x-auto flex gap-6"></div>
        </div>
        <!-- Row 3 END-->

		<!-- Heatmap Row 4 -->
		<div class="col-span-3 p-6 rounded-lg bg-gray-800/40">
			<h2 class="text-2xl font-bold mb-4 text-white">Nationality × Century Heatmap</h2>

			<!-- Filters -->
			<div class="controls mb-4">
				<label>
					Century:
					<select id="centurySelect" multiple size = "6">
						<option value="all">All</option>
					</select>
				</label>

				<label>
					Artist Nationality:
					<select id="nationalitySelect" multiple size="8">
						<option value="all">All</option>
					</select>
				</label>

				<button id="resetFilters" type="button">Reset</button>
			</div>

			<!-- Chart -->
			<div id="heatmapChart" class="w-full overflow-x-auto"></div>
		</div>
		<!-- Heatmap Row 4 END -->

        <div class="col-span-3">
            <h2 class="text-2xl sm:text-3xl font-bold my-8">
                World Map:
            </h2>
        </div>

        <!-- Row 5 -->
        <!-- Row 5 - Cell 1 -->
        <div class="mapTooltip" style="opacity:0"></div>
        <div class="col-span-2">
            <div id="mapContainer" class="mx-auto">
                <svg id="mapSvg" class="w-full h-[500px] block rounded-lg"></svg>
            </div>
        </div>
        <!-- Row 5 - Cell 1 END -->

        <!-- Row 5 - Cell 2 -->
        <div class="col-span-1 p-6 rounded-lg">
            <h2 class="text-2xl font-bold mb-4 text-white">
                Met Collection Objects by Country
            </h2>
            <p class="text-white leading-relaxed">
                This map shows the number of objects in the Metropolitan Museum of Art’s collection by country of
                origin.
                A geographic layout makes it easy to place the data in a real-world context and quickly compare patterns
                across different regions of the world.
            </p>
            <p class="mt-4 text-white leading-relaxed">
                Countries are colored using a logarithmic purple scale, where darker shades indicate higher object
                counts.
                Hover over a country to see the exact number of objects, and use zoom and pan interactions to explore
                specific regions in more detail.
            </p>
            <div class="mt-4">
                <button id="resetZoomBtn"
                    class="bg-indigo-500 hover:bg-indigo-400 px-4 py-2 rounded-md text-sm font-semibold">
                    Reset
                </button>
            </div>
        </div>
        <!-- Row 5 - Cell 2 END -->
        <!-- Row 5 END-->

        <div id="timelineChart" class="mx-auto fixed justify-center col-span-3 w-full fixed bg-white dark:bg-gray-900"
            style="bottom: 0; left: 0; padding-bottom: 0.5rem; padding-top: 0.5rem;"></div>


    </div>
    <!-- Grid END -->

    <!-- Department Pie Chart Tooltip -->
    <div id="tooltipDeptPie"
        style="position: absolute; text-align: center; padding: 12px; font: 14px sans-serif; background: rgba(0, 0, 0, 0.9); color: white; border-radius: 8px; pointer-events: none; opacity: 0; transition: opacity 0.3s; max-width: 250px; z-index: 1000;">
    </div>
	
	<!-- Heatmap Tooltip -->
	<div id="tooltipHeatmap"
		style="position: absolute; text-align: left; padding: 12px; font: 14px sans-serif; background: rgba(0, 0, 0, 0.9); color: white; border-radius: 8px; pointer-events: none; opacity: 0; transition: opacity 0.2s; max-width: 280px; z-index: 1000;">
	</div>


    <div id="loadingChart" class="bg-gray-900 justify-center flex-row mt-8 absolute w-full "
        style="height: 100%; top: 10rem">
        <div class="flex justify-center my-8">
            <div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-surface motion-reduce:animate-[spin_1.5s_linear_infinite] dark:text-white"
                role="status">
                <span
                    class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">Loading...</span>
            </div>
        </div>
        <h2 class="text-center">Loading Chart Data...</h2>
    </div>



    <div class="p-6 mx-auto w-fit">
        <h3 class="text-xl font-semibold mb-4 text-white">Disclosures</h3>

        <div class="mb-6 text-gray-300">
            The following examples have been used as guidance for implementation.
        </div>

        <div class="grid grid-cols-2 gap-6">
            <div class="space-y-4">
                <div>
                    <div class="font-medium text-white">Bar Chart</div>
                    <div class="text-sm text-blue-400">Horizontal bar chart</div>
                    <a href="https://observablehq.com/@d3/horizontal-bar-chart/2"
                        class="text-sm text-gray-400">observablehq.com/@d3/horizontal-bar-chart</a>
                </div>

                <div>
                    <div class="font-medium text-white">Line Chart</div>
                    <div class="text-sm text-blue-400">Inline labels</div>
                    <a href="https://observablehq.com/@d3/inline-labels/2"
                        class="text-sm text-gray-400">observablehq.com/@d3/inline-labels</a>
                </div>
            </div>

            <div class="space-y-4">
                <div>
                    <div class="font-medium text-white">Brushing</div>
                    <div class="text-sm text-blue-400">Brush Snapping (Transitions)</div>
                    <a href="https://observablehq.com/@d3/brush-snapping-transitions"
                        class="text-sm text-gray-400">observablehq.com/@d3/brush-snapping</a>
                </div>

                <div>
                    <div class="font-medium text-white">Word Cloud</div>
                    <div class="space-y-1">
                        <a href="https://www.jasondavies.com/wordcloud/"
                            class="block text-sm text-gray-400">jasondavies.com/wordcloud</a>
                        <a href="https://d3-graph-gallery.com/graph/wordcloud_basic.html"
                            class="block text-sm text-gray-400">d3-graph-gallery.com/wordcloud</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="pt-4 mt-6 border-t border-gray-600">
            <div class="space-y-2 text-gray-300">
                <div>Generative AI assisted with placeholder content and D3.js documentation navigation.</div>
                <div>A truncated dataset is loaded to minimize loading time. The complete dataset is available in
                    the repository.</div>
            </div>
        </div>
    </div>

    <!-- script for loading the data -->
    <script type="module" src="script.js"></script>

    <!-- script to make selection with brush ( re-render callback on other charts )-->
    <script type="module" src="scripts/brush.js"></script>

    <!-- pie chart script -->
    <script type="module" src="scripts/pieChart.js"></script>

    <!-- department pie chart script -->
    <script type="module" src="scripts/pieChartDepartment.js"></script>

    <!-- line chart script -->
    <script type="module" src="scripts/lineChart.js"></script>

    <!-- bar chart script -->
    <script type="module" src="scripts/barChart.js"></script>

    <!-- word cloud script -->
    <script type="module" src="scripts/wordCloud.js"></script>
	
	<!-- heatmap script -->
	<script type="module" src="scripts/heatmap.js"></script>

    <!-- map script -->
    <script type="module" src="scripts/map.js"></script>

</body>

</html>
